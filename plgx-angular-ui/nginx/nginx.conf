worker_processes auto;

events {worker_connections 1636;}

http {
  sendfile on;

  server {
    listen 80;

    index index.html index.htm;
    client_max_body_size 100M;

    location / {
      autoindex off;
      alias /app/;
      try_files $uri $uri/ /index.html;
    }


    location /downloads/ {

      location = /downloads/linux/x64/osquery.flags {
        autoindex off;
        alias /app/flags/linux/x64/osquery.flags;
      }

      location = /downloads/darwin/osquery.flags {
        autoindex off;
        alias /app/flags/darwin/osquery.flags;
        default_type application/octet-stream;
      }
      location = /downloads/windows/x86/osquery.flags {
        autoindex off;
        alias /app/flags/windows/x86/osquery.flags;
        default_type application/octet-stream;
      }
      location = /downloads/windows/x64/osquery.flags {
        autoindex off;
        alias /app/flags/windows/x64/osquery.flags;
        default_type application/octet-stream;
      }


       location = /downloads/linux/x64/certificate.crt {
        autoindex off;
        alias /certificat/certificate.crt;
      }

      location = /downloads/darwin/certificate.crt {
        autoindex off;
        alias /certificate/certificate.crt;
        default_type application/octet-stream;
      }
      location = /downloads/windows/x86/certificate.crt {
        autoindex off;
        alias /certificate/certificate.crt;
        default_type application/octet-stream;
      }
      location = /downloads/windows/x64/certificate.crt {
        autoindex off;
        alias /certificate/certificate.crt;
        default_type application/octet-stream;
      }
      location = /downloads/certificate.crt {
        autoindex off;
        alias /certificate/certificate.crt;
        default_type application/octet-stream;
      }

      alias /app/downloads/;
      autoindex off;

      types {
        application/octet-stream .sh;
        application/octet-stream .crt;
      }
      default_type application/octet-stream;
    }


    location ~* ^.+\.css$ {
      root /app/;
      default_type text/css;
      gzip_static on;
    }

    location ~* ^.+\.js$ {
      root /app/;
      default_type text/javascript;
      gzip_static on;
    }

    location ~* ^.+\.svg$ {
      root /app/;
      types {
        image/svg+xml svg svgz;
      }
    }
  }
}
